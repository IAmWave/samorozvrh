<!DOCTYPE html>
<html>
<head>
    <title>Samorozvrh</title>
    <link rel="stylesheet" href="style.css"></link>
</head>
<body>

<form>
    Kód předmětu:<br>
    <input type="text" name="course_code" id="course_code" value="NTIN061">
    <input type="submit" value="Přidat" onclick="return addCourse()">
</form>
<form>
    <input type="submit" value="Sestavit rozvrh" onclick="return createSchedule()">
</form>
<div id="status"></div>
<hr>
<div id="courses">
    <table id="course_table">
        <thead></thead>
        <tbody id="course_table_body">
        </tbody>
    </table>
</div>
<div id="schedule">
</div>
</body>

<script id="course_list_template" type="text/x-handlebars-template">
    {{#each this}}
        <tr class="course_header">
            <td>
                <input id="cb{{@index}}" type="checkbox" {{#if (course_allowed)}}checked{{/if}}
                    onclick="return handleCheckbox('cb{{@index}}', '{{id}}')">
            </td>
            <td colspan="2"><label for="cb{{@index}}">{{name}}</td>
        </tr>
        {{#each options}}
            <tr class="{{highlight_selection ../id}}">
                <td>
                    <input id="cb{{> group_id}}" type="checkbox" {{#if allowed}}checked{{/if}}
                        onclick="return handleCheckbox('cb{{> group_id}}', '{{../id}}', {{@index}})">
                </td>
                <td><label for="cb{{> group_id}}">{{[0].teacher}}</label></td>
                <td><label for="cb{{> group_id}}">{{all_times}}</label></td>
            </tr>
        {{/each}}
    {{/each}}
</script>

<script id="schedule_template" type="text/x-handlebars-template">
    <table id="schedule_table">
        <tr>
            <td>&nbsp;</td>
            <td>
                {{#each timestamps}}
                <div class="schedule_timestamp" style="left:{{time_to_percent . }}">
                    {{.}}
                </div>
                {{/each}}
            </td>
        </tr>
        {{#each groupsByDay}}
        {{#if groups}}
            {{#each groups}}
            <tr>
                <td>
                    {{#if index}}{{else}}{{../day}}{{/if}}
                    <br>&nbsp;
                </td>
                <td class="schedule_group">
                    {{#each this}}
                        <div class="schedule_event" style="{{event_style}}">
                        {{name}}<br>
                        {{teacher}}
                        </div>
                    {{/each}}
                </td>
            </tr>
            {{/each}}
        {{else}}
            <tr>
                <td>{{day}}<br>&nbsp;</td>
            </tr>
        {{/if}}
        {{/each}}
    </table>
</script>

<script type="text/javascript" src="lib/handlebars-v4.0.11.js"></script>
<script type="text/javascript" src="app.js"></script>
</html>
